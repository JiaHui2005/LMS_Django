<style>
    :root {
        /* Sidebar dãn rộng và cố định */
        --sidebar-width: 280px;
        /* Các biến màu này sẽ tự động ăn theo base.html */
    }

    .sidebar {
        width: var(--sidebar-width);
        height: 100vh;
        background: var(--bg-card); /* Tự chuyển Trắng <-> Xám đen */
        position: fixed;
        left: 0;
        top: 0;
        display: flex;
        flex-direction: column;
        color: var(--text-main);
        z-index: 1000;
        border-right: 1px solid var(--border-color);
        transition: all 0.3s ease;
    }

    /* Logo Section */
    .sidebar-logo {
        padding: 2.5rem 1.5rem;
        font-size: 1.5rem;
        font-weight: 800;
        display: flex;
        align-items: center;
        gap: 12px;
        color: var(--primary-blue);
    }

    .sidebar-logo i {
        background: var(--soft-blue);
        width: 45px;
        height: 45px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 12px;
        transition: 0.3s;
    }

    /* Menu Section */
    .sidebar-menu {
        list-style: none;
        padding: 0 1.25rem;
        margin: 0;
        flex-grow: 1;
    }

    .sidebar-menu li { margin-bottom: 6px; }

    .sidebar-menu a {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 14px 16px;
        color: var(--text-muted);
        text-decoration: none;
        border-radius: 14px;
        font-weight: 600;
        font-size: 0.95rem;
        transition: all 0.3s ease;
    }

    /* Hiệu ứng Hover */
    .sidebar-menu a:hover {
        background: var(--soft-blue);
        color: var(--primary-blue);
        padding-left: 22px;
    }

    /* Active State - Giữ màu xanh đặc trưng */
    .sidebar-menu a.active {
        background: var(--primary-blue) !important;
        color: #ffffff !important;
        box-shadow: 0 10px 15px -3px rgba(14, 165, 233, 0.3);
    }

    /* Badge Thông báo */
    .noti-badge {
        background-color: var(--danger);
        color: white;
        border-radius: 50px;
        padding: 2px 8px;
        font-size: 0.7rem;
        font-weight: 800;
        margin-left: auto;
        border: 2px solid var(--bg-card); /* Viền badge khớp màu nền sidebar */
    }

    /* Footer / Logout */
    .sidebar-footer {
        padding: 1.5rem;
        border-top: 1px solid var(--border-color);
    }

    .logout {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px 16px;
        color: var(--danger);
        text-decoration: none;
        border-radius: 12px;
        font-weight: 700;
        transition: 0.3s;
        background: rgba(239, 68, 68, 0.1); /* Màu đỏ nhạt trong suốt */
    }

    .logout:hover {
        background: rgba(239, 68, 68, 0.2);
        transform: translateY(-2px);
    }

    /* Icon Styling */
    .sidebar-menu i {
        font-size: 1.1rem;
        width: 24px;
        text-align: center;
    }
</style>

<aside class="sidebar">
    <div class="sidebar-logo">
        <i class="fas fa-graduation-cap"></i>
        <span>LMS CENTER</span>
    </div>

    <ul class="sidebar-menu">
        {% with url_name=request.resolver_match.url_name %}
        
        {% if user.role == 'manager' %}
            <li>
                <a href="{% url 'manager_dashboard' %}" class="{% if url_name == 'manager_dashboard' %}active{% endif %}">
                    <i class="fas fa-chart-pie"></i> <span>Dashboard</span>
                </a>
            </li>
            <li>
                <a href="{% url 'user_list' %}" class="{% if 'user' in url_name %}active{% endif %}">
                    <i class="fas fa-users-cog"></i> <span>Người dùng</span>
                </a>
            </li>
            <li>
                <a href="{% url 'class_list' %}" class="{% if 'class' in url_name %}active{% endif %}">
                    <i class="fas fa-school"></i> <span>Lớp học</span>
                </a>
            </li>
            <li>
                <a href="{% url 'notification_list' %}" class="{% if 'notification' in url_name %}active{% endif %}">
                    <i class="fas fa-bullhorn"></i> <span>Thông báo</span>
                </a>
            </li>
        {% endif %}

        {% if user.role == 'student' %}
            <li>
                <a href="{% url 'student_dashboard' %}" class="{% if url_name == 'student_dashboard' %}active{% endif %}">
                    <i class="fas fa-th-large"></i> <span>Dashboard</span>
                </a>
            </li>
        
            <li>
                <a href="{% url 'student_my_classes' %}" class="{% if 'student_my_classes' == url_name or 'student_class_detail' == url_name %}active{% endif %}">
                    <i class="fas fa-book-reader"></i> <span>Lớp của tôi</span>
                </a>
            </li>
        
            <li>
                <a href="{% url 'student_schedule' %}" class="{% if 'student_schedule' == url_name %}active{% endif %}">
                    <i class="fas fa-calendar-alt"></i> <span>Thời khóa biểu</span>
                </a>
            </li>
        
            <li>
                <a href="{% url 'student_enroll' %}" class="{% if 'student_enroll' in url_name %}active{% endif %}">
                    <i class="fas fa-edit"></i> <span>Đăng ký học</span>
                </a>
            </li>

            <li>
                <a href="{% url 'student_notifications' %}" class="{% if 'student_notifications' == url_name %}active{% endif %}">
                    <i class="fas fa-bell"></i> <span>Thông báo</span>
                    {% if unread_notification_count > 0 %}
                        <span class="noti-badge shadow-sm">{{ unread_notification_count }}</span>
                    {% endif %}
                </a>
            </li>
        {% endif %}

        {% endwith %}
    </ul>

    <div class="sidebar-footer">
        <a href="{% url 'logout' %}" class="logout">
            <i class="fas fa-sign-out-alt"></i> <span>Đăng xuất</span>
        </a>
    </div>
</aside>